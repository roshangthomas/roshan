<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Where Are We | Roshan Thomas</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet" />
</head>
<body>
    <nav id="navbar" class="scrolled">
        <div class="nav-inner">
            <a href="../index.html" class="nav-logo">RT</a>
            <div class="nav-divider"></div>
            <div class="nav-links">
                <a href="../index.html#about">About</a>
                <a href="../index.html#experience">Experience</a>
                <a href="../index.html#projects">Projects</a>
                <a href="../index.html#brain-dumps">Brain Dumps</a>
            </div>
            <div class="nav-divider"></div>
            <button id="theme-toggle" aria-label="Toggle theme">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
            </button>
        </div>
    </nav>

    <div class="galaxy-hero">
        <canvas id="galaxy-canvas"></canvas>
        <div class="galaxy-overlay">
            <a href="../index.html#brain-dumps" class="back-link">&larr; Back</a>
            <h1>Where Are We</h1>
            <span class="post-date">January 28, 2026</span>
            <div class="tags"><span>Reflection</span><span>State of Things</span></div>
        </div>
    </div>

    <script>
        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
        });

        // Solar system animation
        (function () {
            const canvas = document.getElementById('galaxy-canvas');
            const ctx = canvas.getContext('2d');
            const hero = document.querySelector('.galaxy-hero');

            let isMobile = window.innerWidth <= 768;
            let mouseX = -9999, mouseY = -9999;

            const STAR_COUNT = isMobile ? 200 : 400;
            const TILT = 0.35;

            // ── Planet draw functions ──

            function drawMercury(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.3, y - r * 0.3, r * 0.05, x, y, r);
                g.addColorStop(0, '#bbb');
                g.addColorStop(0.5, '#888');
                g.addColorStop(1, '#555');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
            }

            function drawVenus(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.3, y - r * 0.3, r * 0.05, x, y, r);
                g.addColorStop(0, '#f5e6c0');
                g.addColorStop(0.4, '#e8c87a');
                g.addColorStop(1, '#a88a45');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Cloudy haze
                ctx.fillStyle = 'rgba(240, 220, 180, 0.12)';
                ctx.beginPath();
                ctx.arc(x, y, r * 1.08, 0, Math.PI * 2);
                ctx.fill();
            }

            function drawEarth(ctx, x, y, r) {
                // Ocean base
                var g = ctx.createRadialGradient(x - r * 0.3, y - r * 0.3, r * 0.05, x, y, r);
                g.addColorStop(0, '#7ec8ff');
                g.addColorStop(0.35, '#4a90d9');
                g.addColorStop(0.7, '#2d7a4f');
                g.addColorStop(1, '#1a4a6a');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Green land patches
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.clip();
                ctx.fillStyle = 'rgba(60, 140, 60, 0.35)';
                ctx.beginPath();
                ctx.ellipse(x - r * 0.2, y - r * 0.1, r * 0.4, r * 0.35, -0.3, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'rgba(55, 130, 55, 0.3)';
                ctx.beginPath();
                ctx.ellipse(x + r * 0.35, y + r * 0.2, r * 0.25, r * 0.3, 0.5, 0, Math.PI * 2);
                ctx.fill();
                // Cloud wisps
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.lineWidth = r * 0.12;
                ctx.lineCap = 'round';
                ctx.beginPath();
                ctx.arc(x + r * 0.1, y - r * 0.25, r * 0.5, -0.8, 0.4);
                ctx.stroke();
                ctx.restore();
                // Atmosphere glow
                var atmo = ctx.createRadialGradient(x, y, r * 0.9, x, y, r * 1.25);
                atmo.addColorStop(0, 'rgba(100, 180, 255, 0.12)');
                atmo.addColorStop(1, 'rgba(100, 180, 255, 0)');
                ctx.fillStyle = atmo;
                ctx.beginPath();
                ctx.arc(x, y, r * 1.25, 0, Math.PI * 2);
                ctx.fill();
            }

            function drawMars(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.3, y - r * 0.3, r * 0.05, x, y, r);
                g.addColorStop(0, '#e88060');
                g.addColorStop(0.5, '#c1440e');
                g.addColorStop(1, '#7a2a06');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Polar cap
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.clip();
                ctx.fillStyle = 'rgba(220, 210, 200, 0.35)';
                ctx.beginPath();
                ctx.ellipse(x, y - r * 0.7, r * 0.35, r * 0.18, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            function drawJupiter(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.25, y - r * 0.25, r * 0.1, x, y, r);
                g.addColorStop(0, '#e8d0a0');
                g.addColorStop(0.5, '#c9a567');
                g.addColorStop(1, '#7a5a25');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Cloud bands
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.clip();
                var bands = [
                    [-0.7, 0.12, 'rgba(180, 130, 60, 0.35)'],
                    [-0.35, 0.14, 'rgba(140, 90, 40, 0.3)'],
                    [0.0, 0.10, 'rgba(200, 150, 80, 0.25)'],
                    [0.25, 0.16, 'rgba(160, 100, 40, 0.35)'],
                    [0.55, 0.12, 'rgba(130, 85, 35, 0.3)'],
                ];
                for (var i = 0; i < bands.length; i++) {
                    ctx.fillStyle = bands[i][2];
                    ctx.fillRect(x - r, y + bands[i][0] * r, r * 2, bands[i][1] * r * 2);
                }
                // Great Red Spot
                ctx.fillStyle = 'rgba(190, 80, 40, 0.45)';
                ctx.beginPath();
                ctx.ellipse(x + r * 0.25, y + r * 0.28, r * 0.18, r * 0.11, 0.1, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            function drawSaturnBody(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.25, y - r * 0.25, r * 0.1, x, y, r);
                g.addColorStop(0, '#f0dca0');
                g.addColorStop(0.4, '#d4b87a');
                g.addColorStop(1, '#8a7040');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Subtle bands
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.clip();
                ctx.fillStyle = 'rgba(180, 150, 90, 0.2)';
                ctx.fillRect(x - r, y - r * 0.3, r * 2, r * 0.18);
                ctx.fillStyle = 'rgba(160, 130, 70, 0.2)';
                ctx.fillRect(x - r, y + r * 0.15, r * 2, r * 0.2);
                ctx.restore();
            }

            function drawSaturnRingHalf(ctx, x, y, r, front) {
                var startA = front ? 0 : Math.PI;
                var endA = front ? Math.PI : Math.PI * 2;
                // 3 ring bands with gap
                var rings = [
                    { w: r * 2.5, h: r * 0.65, lw: r * 0.22, c: 'rgba(210, 185, 130, 0.5)' },
                    { w: r * 2.15, h: r * 0.55, lw: r * 0.28, c: 'rgba(195, 170, 115, 0.55)' },
                    { w: r * 1.7, h: r * 0.44, lw: r * 0.12, c: 'rgba(180, 155, 100, 0.35)' },
                ];
                for (var i = 0; i < rings.length; i++) {
                    ctx.strokeStyle = rings[i].c;
                    ctx.lineWidth = rings[i].lw;
                    ctx.beginPath();
                    ctx.ellipse(x, y, rings[i].w, rings[i].h, 0, startA, endA);
                    ctx.stroke();
                }
            }

            function drawUranus(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.25, y - r * 0.25, r * 0.05, x, y, r);
                g.addColorStop(0, '#b8eaf0');
                g.addColorStop(0.4, '#7ec8d4');
                g.addColorStop(1, '#3a7a84');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Thin vertical ring (Uranus rotates sideways)
                ctx.strokeStyle = 'rgba(160, 210, 220, 0.25)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.ellipse(x, y, r * 0.3, r * 1.8, 0, 0, Math.PI * 2);
                ctx.stroke();
            }

            function drawNeptune(ctx, x, y, r) {
                var g = ctx.createRadialGradient(x - r * 0.25, y - r * 0.25, r * 0.05, x, y, r);
                g.addColorStop(0, '#6090e8');
                g.addColorStop(0.4, '#3050c0');
                g.addColorStop(1, '#1a2868');
                ctx.fillStyle = g;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
                // Subtle dark spot
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.clip();
                ctx.fillStyle = 'rgba(15, 20, 60, 0.35)';
                ctx.beginPath();
                ctx.ellipse(x - r * 0.15, y - r * 0.1, r * 0.22, r * 0.14, -0.2, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }

            // ── Planet data ──
            var PLANETS = [
                { name: 'Mercury', orbit: 0.10, radius: 3,    speed: 0.012,  moons: 0,   draw: drawMercury },
                { name: 'Venus',   orbit: 0.16, radius: 5.5,  speed: 0.009,  moons: 0,   draw: drawVenus },
                { name: 'Earth',   orbit: 0.22, radius: 6,    speed: 0.007,  moons: 1,   draw: drawEarth, youAreHere: true, moonOrbit: [2.5, 3.5] },
                { name: 'Mars',    orbit: 0.28, radius: 4.5,  speed: 0.005,  moons: 2,   draw: drawMars, moonOrbit: [2.0, 3.5] },
                { name: 'Jupiter', orbit: 0.42, radius: 16,   speed: 0.003,  moons: 95,  draw: drawJupiter, moonOrbit: [1.6, 4.5] },
                { name: 'Saturn',  orbit: 0.56, radius: 13,   speed: 0.002,  moons: 146, draw: null, moonOrbit: [2.8, 5.5], hasRings: true },
                { name: 'Uranus',  orbit: 0.72, radius: 9,    speed: 0.0012, moons: 28,  draw: drawUranus, moonOrbit: [1.8, 4.0] },
                { name: 'Neptune', orbit: 0.88, radius: 8.5,  speed: 0.0008, moons: 16,  draw: drawNeptune, moonOrbit: [1.6, 3.5] },
            ];

            // ── State ──
            var stars = [];
            var moonData = [];
            var planetAngles = [];

            function resize() {
                canvas.width = hero.offsetWidth;
                canvas.height = hero.offsetHeight;
            }

            function createStars() {
                stars = [];
                for (var i = 0; i < STAR_COUNT; i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        r: Math.random() * 1.2 + 0.2,
                        baseOpacity: Math.random() * 0.5 + 0.2,
                        twinkleSpeed: Math.random() * 0.003 + 0.0008,
                        twinkleOffset: Math.random() * Math.PI * 2
                    });
                }
            }

            function initPlanets() {
                moonData = [];
                planetAngles = [];
                for (var i = 0; i < PLANETS.length; i++) {
                    planetAngles.push(Math.random() * Math.PI * 2);
                    var p = PLANETS[i];
                    var moons = [];
                    var count = isMobile ? Math.ceil(p.moons * 0.5) : p.moons;
                    if (p.moonOrbit) {
                        for (var m = 0; m < count; m++) {
                            var minR = p.moonOrbit[0];
                            var maxR = p.moonOrbit[1];
                            moons.push({
                                orbitRadius: p.radius * (minR + Math.random() * (maxR - minR)),
                                speed: 0.008 + Math.random() * 0.025,
                                angle: Math.random() * Math.PI * 2,
                                size: Math.random() * 0.7 + 0.3,
                                opacity: Math.random() * 0.35 + 0.25,
                                tiltOffset: (Math.random() - 0.5) * 0.3
                            });
                        }
                    }
                    moonData.push(moons);
                }
            }

            // ── Main draw loop ──
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                var cx = canvas.width / 2;
                var cy = canvas.height / 2;
                var maxOrbit = Math.min(cx, cy) * 0.92;
                var scale = Math.min(2, Math.max(0.5, maxOrbit / 420));
                var now = Date.now();

                // ── Background stars ──
                for (var i = 0; i < stars.length; i++) {
                    var s = stars[i];
                    var tw = 0.5 + 0.5 * Math.sin(now * s.twinkleSpeed + s.twinkleOffset);
                    var op = s.baseOpacity * (0.35 + tw * 0.65);
                    ctx.fillStyle = 'rgba(220,220,235,' + op + ')';
                    ctx.beginPath();
                    ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                    ctx.fill();
                }

                // ── Sun ──
                var sunR = 14 * scale;
                // Outer corona
                var cg1 = ctx.createRadialGradient(cx, cy, 0, cx, cy, sunR * 5);
                cg1.addColorStop(0, 'rgba(255,200,60,0.18)');
                cg1.addColorStop(0.4, 'rgba(255,160,30,0.06)');
                cg1.addColorStop(1, 'rgba(255,120,0,0)');
                ctx.fillStyle = cg1;
                ctx.beginPath();
                ctx.arc(cx, cy, sunR * 5, 0, Math.PI * 2);
                ctx.fill();
                // Inner corona
                var cg2 = ctx.createRadialGradient(cx, cy, 0, cx, cy, sunR * 2.5);
                cg2.addColorStop(0, 'rgba(255,220,100,0.3)');
                cg2.addColorStop(0.5, 'rgba(255,180,50,0.1)');
                cg2.addColorStop(1, 'rgba(255,150,30,0)');
                ctx.fillStyle = cg2;
                ctx.beginPath();
                ctx.arc(cx, cy, sunR * 2.5, 0, Math.PI * 2);
                ctx.fill();
                // Sun body
                var sg = ctx.createRadialGradient(cx - sunR * 0.25, cy - sunR * 0.25, sunR * 0.1, cx, cy, sunR);
                sg.addColorStop(0, '#fffbe8');
                sg.addColorStop(0.3, '#ffdd57');
                sg.addColorStop(0.7, '#ffa500');
                sg.addColorStop(1, '#cc6600');
                ctx.fillStyle = sg;
                ctx.beginPath();
                ctx.arc(cx, cy, sunR, 0, Math.PI * 2);
                ctx.fill();

                // ── Planets ──
                for (var i = 0; i < PLANETS.length; i++) {
                    var p = PLANETS[i];
                    var orbitR = maxOrbit * p.orbit;
                    var orbitRY = orbitR * TILT;

                    // Orbit path
                    ctx.strokeStyle = 'rgba(255,255,255,0.05)';
                    ctx.lineWidth = 0.5;
                    ctx.beginPath();
                    ctx.ellipse(cx, cy, orbitR, orbitRY, 0, 0, Math.PI * 2);
                    ctx.stroke();

                    // Update angle
                    planetAngles[i] += p.speed;
                    var angle = planetAngles[i];
                    var px = cx + Math.cos(angle) * orbitR;
                    var py = cy + Math.sin(angle) * orbitRY;
                    var pr = p.radius * scale;

                    // ── Moons ──
                    var moons = moonData[i];
                    for (var m = 0; m < moons.length; m++) {
                        var moon = moons[m];
                        moon.angle += moon.speed;
                        var mr = moon.orbitRadius * scale;
                        var mx = px + Math.cos(moon.angle) * mr;
                        var my = py + Math.sin(moon.angle) * mr * (0.35 + moon.tiltOffset);
                        ctx.fillStyle = 'rgba(200,200,215,' + moon.opacity + ')';
                        ctx.beginPath();
                        ctx.arc(mx, my, moon.size * Math.max(0.4, scale * 0.6), 0, Math.PI * 2);
                        ctx.fill();
                    }

                    // ── Draw planet ──
                    if (p.hasRings) {
                        // Saturn: back ring half → body → front ring half
                        drawSaturnRingHalf(ctx, px, py, pr, false);
                        drawSaturnBody(ctx, px, py, pr);
                        drawSaturnRingHalf(ctx, px, py, pr, true);
                    } else {
                        p.draw(ctx, px, py, pr);
                    }

                    // ── Planet label ──
                    var dx = px - mouseX;
                    var dy = py - mouseY;
                    var dist = Math.sqrt(dx * dx + dy * dy);
                    var hoverRange = pr + 50;
                    var isHovered = dist < hoverRange;
                    var labelOp = isHovered ? 0.9 : 0.3;
                    var fontSize = Math.max(9, 11 * scale);

                    ctx.font = '500 ' + fontSize + 'px Inter,-apple-system,sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillStyle = 'rgba(255,255,255,' + labelOp + ')';
                    ctx.fillText(p.name, px, py - pr - 8 * scale);

                    // Moon count on hover
                    if (isHovered && p.moons > 0) {
                        ctx.font = '400 ' + (fontSize * 0.8) + 'px Inter,-apple-system,sans-serif';
                        ctx.fillStyle = 'rgba(255,255,255,0.5)';
                        ctx.fillText(p.moons + ' moon' + (p.moons > 1 ? 's' : ''), px, py - pr - 8 * scale + fontSize + 2);
                    }

                    // ── "You Are Here" on Earth ──
                    if (p.youAreHere) {
                        var pulse = 1 + 0.3 * Math.sin(now * 0.004);
                        // Pulsing rings
                        ctx.strokeStyle = 'rgba(100,180,255,' + (0.35 * pulse) + ')';
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.arc(px, py, pr + 5 * pulse, 0, Math.PI * 2);
                        ctx.stroke();
                        ctx.strokeStyle = 'rgba(100,180,255,' + (0.15 * pulse) + ')';
                        ctx.beginPath();
                        ctx.arc(px, py, pr + 11 * pulse, 0, Math.PI * 2);
                        ctx.stroke();
                        // Label — position above or below depending on Earth's vertical position
                        var youY = py > cy ? py - pr - 22 * scale : py + pr + 16 * scale;
                        ctx.font = '500 ' + Math.max(10, 11 * scale) + 'px Inter,-apple-system,sans-serif';
                        ctx.fillStyle = 'rgba(100,180,255,' + (0.65 + 0.35 * Math.sin(now * 0.003)) + ')';
                        ctx.textAlign = 'center';
                        ctx.fillText('You Are Here', px, youY);
                    }
                }

                ctx.textAlign = 'start';
                requestAnimationFrame(draw);
            }

            // ── Mouse tracking ──
            canvas.addEventListener('mousemove', function (e) {
                var rect = canvas.getBoundingClientRect();
                mouseX = (e.clientX - rect.left) * (canvas.width / rect.width);
                mouseY = (e.clientY - rect.top) * (canvas.height / rect.height);
            });
            canvas.addEventListener('mouseleave', function () {
                mouseX = -9999;
                mouseY = -9999;
            });

            resize();
            createStars();
            initPlanets();
            draw();

            window.addEventListener('resize', function () {
                isMobile = window.innerWidth <= 768;
                resize();
                createStars();
                initPlanets();
            });
        })();
    </script>
</body>
</html>
